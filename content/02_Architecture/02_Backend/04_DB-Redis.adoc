---
title: Redis - База данных
weight: 6
---

:toc: auto
:toc-title: Содержание
:doctype: book
:icons: font
:figure-caption: Рисунок
:source-highlighter: pygments
:pygments-css: style
:pygments-style: monokai
:includedir: ./content/

:imgdir: /02_02_04_img/
:imagesdir: {imgdir}
ifeval::[{exp2pdf} == 1]
:imagesdir: static{imgdir}
:includedir: ../
endif::[]

:imagesoutdir: ./static/02_02_04_img/

= База данных Redis

{empty} +

*Redis* (Remote Dictionary Server) – это быстрое хранилище данных типа «ключ‑значение» в памяти с открытым исходным кодом. *Redis* - хранилище, которое используется в качестве базы данных, кэша, брокера сообщений и очереди.

{empty} +

*Redis* обеспечивает время отклика на уровне долей миллисекунды и позволяет приложениям, работающим в режиме реального времени, выполнять миллионы запросов в секунду. Такие приложения востребованы во многих сферах, таких как игры, рекламные технологии, финансовые сервисы, здравоохранение и IoT. Сегодня *Redis* – одно из наиболее популярных ядер с открытым исходным кодом. Благодаря быстрой производительности *Redis* широко применяется для кэширования, управления сеансами, создания таблиц лидеров, аналитики в режиме реального времени, работы с геопространственными данными, поддержки служб такси, чатов и сервисов обмена сообщениями, потоковой передачи мультимедиа и приложений с отправкой сообщений по модели «издатель – подписчик» (Pub/Sub).

== Производительсность

Все данные *Redis* хранятся в памяти, что обеспечивает низкую задержку и высокую пропускную способность доступа к данным. В отличие от традиционных баз данных, хранилища данных в памяти не требуют перемещения на диск, что сокращает задержку ядра до микросекунд. Благодаря этому хранилища данных в памяти могут многократно увеличивать количество выполняемых операций и сокращать время отклика. В результате обеспечивается чрезвычайно высокая производительность. Операции чтения и записи в среднем занимают менее миллисекунды, скорость работы достигает миллионов операций в секунду.

== Гибкие структуры данных

В отличие от других хранилищ на основе пар «ключ – значение», которые поддерживают ограниченный набор структур данных, *Redis* поддерживает огромное разнообразие структур данных, позволяющее удовлетворить потребности разнообразных приложений. Типы данных *Redis* включают:

{empty} +

****
- *Строки* – текстовые или двоичные данные размером до 512 МБ;
- *Списки* – коллекции строк, упорядоченные в порядке добавления;
- *Множества* – неупорядоченные коллекции строк с возможностью пересечения, объединения и сравнения с другими типами множеств;
- *Сортированные множества* – множества, упорядоченные по значению;
- *Хэш‑таблицы* – структуры данных для хранения списков полей и значений;
- *Битовые массивы* – тип данных, который дает возможность выполнять операции на уровне битов;
- *Структуры HyperLogLog* – вероятностные структуры данных, служащие для оценки количества уникальных элементов в наборе данных;
- *Потоки* – очереди сообщений со структурой журналов данных;
- *Пространственные данные* – записи карт на основе долготы/широты, «поблизости»
- *JSON* – полуструктурированный объект со вложенной структурой из именованных значений с поддержкой чисел, строк, булевских значений, массивов и других объектов
****

== Простота и удобство

*Redis* позволяет писать такой же сложный код с меньшим количеством простых строк. *Redis* позволяет писать меньше строк для хранения, использования данных и организации доступа к данным в приложениях. Разница в том, что, в отличие от языков запросов традиционных баз данных, с *Redis* разработчики могут использовать простую структуру команд. Например, вы можете задействовать структуру хэш-данных *Redis*, чтобы перемещать данные в хранилище только одной строкой кода. Решение подобной задачи с использованием хранилища данных, не поддерживающего структуры хэш‑таблиц, потребует написания серьезного объема кода для преобразования данных из одного формата в другой. *Redis* уже оснащен встроенными структурами данных и предоставляет множество возможностей их комбинирования и взаимодействия с данными клиента. Разработчикам под *Redis* доступны более ста клиентов с открытым исходным кодом. Поддерживаемые языки программирования включают *Java*, *Python*, *PHP*, *C*, *C++*, *C#*, *JavaScript*, *Node.js*, *Ruby*, *R*, *Go* и многие другие.

== Репликация и постоянное хранение

В *Redis* применяется архитектура узлов «ведущий‑подчиненный» и поддерживается асинхронная репликация, при которой данные могут копироваться на несколько подчиненных серверов. Это обеспечивает как улучшенные характеристики чтения (так как запросы могут быть распределены между серверами), так и ускоренное восстановление в случае сбоя основного сервера. Для обеспечения постоянного хранения *Redis* поддерживает снимки состояния на момент времени (копирование наборов данных *Redis* на диск).

== Высокая доступность и масштабируемость

*Redis* предлагает архитектуру «ведущий‑подчиненный» с одним ведущим узлом или с кластерной топологией. Это позволяет создавать высокодоступные решения, обеспечивающие стабильную производительность и надежность. Если требуется настроить размер кластера, доступны различные варианты вертикального и горизонтального масштабирования. В результате можно наращивать кластер в соответствии с потребностями.
Инструменты с открытым исходным кодом
*Redis* – проект с открытым исходным кодом, поддерживаемый активным сообществом. Поскольку *Redis* базируется на открытых стандартах, поддерживает открытые форматы данных и имеет множество клиентов, отсутствует вероятность блокировки поставщиком или технологического тупика.

== Распространенные примеры использования Redis

=== Кэширование

*Redis* прекрасно подходит для организации высокодоступного кэша в памяти, который уменьшает задержку доступа, увеличивает пропускную способность и снижает нагрузку на реляционную базу данных или базу данных *NoSQL* и на приложение. *Redis* может обеспечить доступ к часто запрашиваемым данным с задержкой в доли миллисекунды и позволяет с легкостью выполнять масштабирование, справляясь с повышением нагрузок без дорогостоящего наращивания мощности БД на уровне сервера. Типовые примеры использования *Redis* – это кэширование результатов запросов к базе данных, долговременных сессий, веб‑страниц или часто используемых объектов, таких как изображения, файлы и метаданные.

=== Чат, обмен сообщениями и очереди

*Redis* поддерживает системы «издатель – подписчик» с заданными шаблонами и различные структуры данных, такие как списки, сортированные множества и хэш‑таблицы. Это позволяет использовать *Redis* для создания высокопроизводительных комнат чата, лент комментариев, работающих в режиме реального времени, лент новостей в социальных сетях и систем взаимодействия серверов. Структура данных список сервиса *Redis* позволяет легко создавать упрощенные очереди. Списки *Redis List* обеспечивают выполнение элементарных операций, а также возможности блокировки, поэтому подходят для различных приложений, в которых требуется надежный брокер сообщений или циклический список.

=== Хранилище сессий

*Redis* как хранилище данных в памяти с высокой доступностью и долговременным хранением широко применяется для хранения данных сессий в приложениях, работающих в масштабе всего Интернета, а также для управления такими данными. *Redis* обеспечивает задержку на уровне долей миллисекунды, масштабируемость и отказоустойчивость, необходимые для управления такими данными сессий, как профили пользователей, учетные данные, состояние сессий и индивидуальные пользовательские настройки.

=== Потоковая передача мультимедиа

*Redis* предлагает быстрое хранилище данных в памяти для примеров использования с потоковой передачей в режиме реального времени. *Redis* можно использовать для хранения метаданных профилей пользователей и историй просмотров, данных и токенов аутентификации миллионов пользователей, а также файлов манифеста. Это позволяет сетям *CDN* одновременно выполнять потоковую передачу видео миллионам пользователей мобильных и настольных компьютеров.

=== Работа с геопространственными данными

*Redis* предлагает специально разработанные операторы и структуры данных в памяти для управления поступающими в режиме реального времени геопространственными данными в нужном масштабе и с высокой скоростью. Такие команды, как *GEOADD*, *GEODIST*, *GEORADIUS* и *GEORADIUSBYMEMBER*, предназначенные для хранения, обработки и анализа геопространственных данных в режиме реального времени, позволяют *Redis* просто и быстро выполнять геопространственные операции. *Redis* можно использовать для добавления в приложение разнообразных возможностей на основе данных о местоположении, например чтобы определять время в пути, рассчитывать расстояние до пункта назначения и предоставлять информацию о достопримечательностях.

=== Machine Learning

Чтобы быстро обрабатывать огромные объемы разнообразных данных, передаваемых на большой скорости, и автоматизировать принятие решений, современным приложениям, управляемым данными, требуется машинное обучение. Для таких примеров использования, как обнаружение мошенничества в играх и финансовых сервисах, торги в режиме реального времени в сфере рекламы, подбор пар на сайтах знакомств или поиск попутчиков, способность обрабатывать данные в режиме реального времени и принимать решения в течение нескольких десятков миллисекунд имеет первостепенное значение. *Redis* предоставляет скоростное хранилище данных в памяти, обеспечивающее быстрое создание, обучение и развертывание моделей машинного обучения.

=== Аналитика в режиме реального времени

*Redis* может использоваться с решениями потоковой передачи, такими как *Apache Kafka*, в качестве хранилища данных в памяти для сбора, обработки и анализа данных в режиме реального времени с задержкой на уровне долей миллисекунды. *Redis* – идеальный выбор для аналитики в режиме реального времени в таких примерах использования, как аналитика в социальных сетях, рекламный таргетинг, персонализация контента и IoT.