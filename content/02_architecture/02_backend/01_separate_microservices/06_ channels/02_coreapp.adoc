---
title: "Канал coreapp"
description: "Канал coreapp"
weight: 2
draft: false
---

:imgdir: /02_02_01_06_02_img/
:imagesoutdir: ./static/02_02_01_06_02_img/

include::content/init.adoc[]

= Канал coreapp

{empty} +

== Описание канала coreapp

****
****

== Назначение канала coreapp

****
Дефиниции канала *corapp* предназначены для внутреннего использования и выполняют функции:
====
* Авторизации и аутентификации
* Взаимодействие фронт-энда и базы данных
* Интеграции с оперсистемами
* Другие
====
****

== Цели

****
****

== Задачи

****
****

== Состав команды

****
[cols=".^40,.^30,.^30"]
|===
^.^| Ф.И.О. ^.^| Роль ^.^| Email

| | |
|===
****

== Информационная модель

=== Агрегаты и сущности

****
* *Объект-значение* - группировка нескольких атрибутов как единое целое, добавляя к ним определённое поведение.
* *Сущность* - Основное отличие *Сущности* от *Объекта-значения* — это идентификатор. У Сущностей есть идентификаторы. *Идентификатор* — это единственное свойство Сущностей, которое определяет уникальность каждой из них.
* *Агрегат* - объединение связанных сущностей, имеющих общий ограниченный контекст и набор бизнес-правил. Каждый агрегат имеет корневую сущность, т.е. объект через который осуществляется взаимодействие со всеми сущностями агрегата.
****

.Агрегат `[.red]#*Клиент (физическое лицо)*#` (*Clients*) описывает все физические лица, которые могут или являются клиентами и так или иначе учавствуют в сделках.
****
.Сущности включаемые в агрегат `[.red]#*Клиент (физическое лицо)*#`
[cols=".^30h,.^70"]
|===
^.^| Сущность ^.^| Описание

| *Физическое лицо (person)* | Сущность Физическое лицо (person) используется при необходимости в агрегате сделать ссылку на конкретное физическое лицо.
| &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; *Дети (children)* | 
| *Адреса (addresses)* | Адреса (фактические и юридические). Могут относиться как к физическому лицу, так и к юридическим организациям.
| *Телефоны (telephones)* | Сущность описывает личные (не рабочие) телефоны физических лиц.
| *Документы (documents)* | Сущность описывает документы разных типов, принадлежащие физическим лицам (удостоверения личности (паспорт), доверенности и так далее).
| *СОПД (sopd)* | Сущность описывает существующие **С**оглашения об **О**бработке **П**ерсональных **Д**анных у клиента, а также общий статус согласия
| *Комментарии пользователей (comments)* | 
| *Банковские реквизиты (accounts)* | 
| *Дисконтные (скидочные) карты (discount_cards)* | 
| *Мессенджеры (messengers)* | 
| *Социальные сети (social_networks)* | 
|===
****

====
NOTE: Агрегаты `[.red]#*Пользователь*#`, `[.red]#*Сотрудник*#` наследуют данные от агрегата `[.red]#*Физическое лицо (клиент)*#`!
====

.Агрегат `[.red]#*Cотрудник*#` (*Employees*) описывает все физические лица, которые являются сотрудниками компании *ROLF*.
****
.Сущности включаемые в агрегат `[.red]#*Cотрудник*#`:
[cols=".^30h,.^70"]
|===
^.^| Сущность ^.^| Описание

| *Физическое лицо (person)* | Сущность Физическое лицо (person) используется при необходимости в агрегате сделать ссылку на конкретное физическое лицо.
| *HR данные (hr_data)* | 
| *Группы сотрудников (employee_group)* | 
| *Рассписание (schedule)* | 
| *Шаблон рассписания (schedule_template)* | 
| *Телефоны (telephones)* | Сущность описывает личные (не рабочие) телефоны физических лиц.
| *Рабочие телефоны (working_telephones)* | Сущность описывает рабочие телефоны физических лиц.
| *Электронная почта (emails)* | 
| *Документы (documents)* | Сущность описывает документы разных типов, принадлежащие физическим лицам (удостоверения личности (паспорт), доверенности и так далее).
| *Подчиненные (under_employees)* | 
| *Начальники (managers)* | 
|===
****

====
NOTE: Агрегат `[.red]#*Сотрудник*#` может наследовать данные от агрегата `[.red]#*Физическое лицо (клиент)*#`, так как любой сотрудник может также являться клиентом, то есть одним и тем же физическим лицом. +
Все методы для работы с данным агрегатом должны начинаться с `*/rolfid/v1/employees*`
====

.Агрегат `[.red]#*Пользователь*#` (*User*) описывает все физические лица, которые являются пользователями *Flora*. Пользователи обладают правами на просмотр и/или изменения информации. Данные права определяются через группы доступа, которые первоначально определены в *AD* и синхронизированы через *Keycloak*.
****
.Сущности включаемые в агрегат `[.red]#*Пользователь*#`:
[cols=".^30h,.^70"]
|===
^.^| Сущность ^.^| Описание

| *Физическое лицо (person)* | Сущность Физическое лицо (person) используется при необходимости в агрегате сделать ссылку на конкретное физическое лицо.
| *Группы пользователей (ad_groups)* | 
| *Телефоны (telephones)* | Сущность описывает личные (не рабочие) телефоны физических лиц.
| *Электронная почта (emails)* | 
|===
****

====
NOTE: Агрегат `[.red]#*Пользователь*#` может использует общие сущности *RolfID*. +
Все методы для работы с данным агрегатом должны начинаться с `*/rolfid/v1/users*`
====

.Агрегат `[.red]#*Автомобиль*#` (*vehicle*) описывает все физические лица, которые являются пользователями *Flora*. Пользователи обладают правами на просмотр и/или изменения информации. Данные права определяются через группы доступа, которые первоначально определены в *AD* и синхронизированы через *Keycloak*.
****
.Сущности включаемые в агрегат `[.red]#*Автомобиль*#`:
[cols=".^30h,.^70"]
|===
^.^| Сущность ^.^| Описание

| *Комплектация (equipment)* | 
| *Владелец (owner)* | 
| *Резерв (reserve)* | 
| *Гарантия (warranty)* | 
| *Отзывные компании (recall_campaign)* | 
| *Фото и видео (media)* | 
| *Документы (documents)* | Сущность описывает документы разных типов, принадлежащие физическим лицам (удостоверения личности (паспорт), доверенности и так далее).
| *Потребности (needs)* | 
| *Платежи (payments)* | 
| *Акты осмотра автомобиля (inspection)* | 
| *Элкетронные карты диагностики (ekd)* | 
| *История (history)* | 
| *Гос. номера (plate_numbers)* | 
| *Проверки (check)* | 
| *ТО и ремонт (service)* | 
| *Запрет выкупа (prohibition_of_redemption)* | 
| *Пробег (mileage)* | 
| *Диски и шины (wheels_and_tires)* | 
| *Диски (wheel)* | 
| *Шины (tires)* | 
|===
****

====
NOTE: Агрегат `[.red]#*Автомобиль*#` (*Vehicles*) описывает все транспортные средства, которые находятся в продаже или являются собственностью клиента и так или иначе учавствуют в сделках.
====

.Основные сущности, которые переиспользуются или наследуются для разных агрегатов:
****
[cols=".^30h,.^70"]
|===
^.^| Сущность ^.^| Описание

| *Страна (country)* | Объект *Страна* используется при необходимости в агрегате сделать ссылку на принадлежность к той или иной стране (например, для гражданста физического лица или регистрации юридического лица).
| *Физическое лицо (person)* | Сущность Физическое лицо (person) используется при необходимости в агрегате сделать ссылку на конкретное физическое лицо.
| *Телефоны (telephones)* | Сущность описывает личные (не рабочие) телефоны физических лиц.
| *Адреса (adresses)* | Адреса (фактические и юридические). Могут относиться как к физическому лицу, так и к юридическим организациям.
| *Электронная почта (emails)* | Сущность описывает личные адреса электронной почты.
| *Документы (documents)* | Сущность описывает документы разных типов, принадлежащие физическим лицам (удостоверения личности (паспорт), доверенности и так далее).
| *СОПД (sopd)* | Сущность описывает существующие **С**оглашения об **О**бработке **П**ерсональных **Д**анных у клиента, а также общий статус согласия
|===
****

=== Базы данных

.Структура базы данных
****
[cols=".^30h,.^70"]
|===
^.^| Название таблицы ^.^| Описание

|===
****

.Таблица1
****
[cols=".^20,.^20,.^20,.^20,.^20"]
|===
^.^| Колонка ^.^| Тип ^.^| Not Null ^.^| Uniq ^.^| Comment

| | | | | 
|===
****

.Таблица2
****
[cols=".^20,.^20,.^20,.^20,.^20"]
|===
^.^| Колонка ^.^| Тип ^.^| Not Null ^.^| Uniq ^.^| Comment

| | | | | 
|===
****


== Сценарии

****
****